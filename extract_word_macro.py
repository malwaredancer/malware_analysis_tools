#!/bin/python

import argparse
import xmltodict
import pprint

def findBinDataText(dictionary):
    if dictionary is None:
        return
    if type(dictionary) is str:
        if len(dictionary) > 200:
            open((dictionary[:20]).replace('/', '_'), 'w').write(dictionary)
        return
    if type(dictionary) is list:
        for item in dictionary:
            findBinDataText(item)
        return
    for k, v in dictionary.items():
        findBinDataText(dictionary[k])

parser = argparse.ArgumentParser()
parser.add_argument('--filename', help='filename to be parsed recursively', required=True)

args = parser.parse_args()

dict_content = xmltodict.parse(open(args.filename).read())
findBinDataText(dict_content)
